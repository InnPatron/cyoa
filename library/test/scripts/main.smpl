mod main;

use rt;

fn start(c: rt::Ctxt) -> rt::Ctxt {

    return rt::set_font(c, "common")
        |> rt::display("Hello world")
        |> rt::clear_choices()
        |> rt::choice(cheap_display, "Change display")
        |> rt::choice(nop, "NOP")
        |> rt::choice(end, "Finish it");
}

fn cheap_display(c: rt::Ctxt) -> rt::Ctxt {
    return rt::display(c, "Changed to something else!");
}

fn nop(c: rt::Ctxt) -> rt::Ctxt {
    return c;
}

fn end(c: rt::Ctxt) -> rt::Ctxt {

    return rt::display(c, "END")
        |> rt::clear_choices()
        |> rt::set_background("test")
        |> rt::set_state(1);

    return c;
}
